# ガンプラ見守りロボット - テストのやりかた

こんにちは！
この説明書は、「ガンプラ見守りロボット」がちゃんとお仕事をしてくれるか、チェックするためのやり方を書いています。
お父さんやお母さんと一緒に、または一人でチャレンジしてみよう！

## このロボットはなに？

みんなが欲しいガンプラ（ガンダムのプラモデル）が、お店（プレミアムバンダイ）で「売り切れ」から「在庫あり」に変わったとき、すぐにLINEでお知らせしてくれる、とっても便利なロボットだよ。

これがあれば、欲しかったガンプラを買いのがすことがなくなるかも！

## 「テスト」ってなに？

「テスト」っていうのは、このロボットがちゃんと約束通りに動いてくれるか、みんなで確認する作業のこと。

- ちゃんとお店を見張ってくれるかな？
- 「在庫あり」をちゃんと見つけられるかな？
- LINEでちゃんとお知らせしてくれるかな？

こういうことを一つずつチェックしていくよ。

## テストのじゅんび

ロボットを動かす前に、いくつか準備が必要だよ。

### 1. 見張ってほしいガンプラのリストをつくる

どのガンプラを見張ってほしいか、ロボットに教えるためのリストだよ。

- `config` というフォルダの中にある `targets.json.example` というファイルをコピーして、名前を `targets.json` に変えよう。
- `targets.json` の中身を、下みたいに書きかえるよ。

**例：**
```json
[
  {
    "id": "item-1",
    "name": "すごいガンダム",
    "url": "https://p-bandai.jp/item/item-1000123456/",
    "lastStatus": "out_of_stock",
    "enabled": true
  }
]
```
- `name`: ガンプラの名前（好きな名前でOK）
- `url`: 見張ってほしいガンプラのページの住所（URL）

### 2. お知らせする人をきめる

誰にLINEでお知らせするか、連絡先リストをつくるよ。

- `config` フォルダの中にある `users.json.example` をコピーして、名前を `users.json` に変えよう。
- `users.json` の中身を、下みたいに書きかえるよ。

**例：**
```json
[
  {
    "userId": "U1234567890abcdef1234567890abcdef",
    "displayName": "自分のなまえ"
  }
]
```
- `userId`: LINEの自分のID（これはお父さんかお母さんに教えてもらおう）

## テストをやってみよう！

さあ、準備ができたら、いよいよロボットを動かしてみよう！
パソコンの黒い画面（ターミナル）で、下の「じゅもん」を打ち込んでね。

### テスト１：ロボット、起動！

まず、ロボットがちゃんと目を覚ますかチェック！

**じゅもん**
```bash
npm run start
```

黒い画面に `🚀 ガンプラ在庫監視Bot 起動` って表示されたら、テスト１は成功だ！

### テスト２：「売り切れ」をチェック！

次に、ロボットが「売り切れ」の状態をちゃんとわかるか見てみよう。

- `targets.json` に書いたガンプラが、本当に「売り切れ」になっているか、ブラウザで開いて確認しよう。
- ロボットを動かしたあと、黒い画面に `チェック完了: すごいガンダム | out_of_stock` のように表示されたら、ちゃんと「売り切れ」だとわかっている証拠だよ。成功！

### テスト３：「在庫あり」をチェック！

もし、見張っているガンプラが「在庫あり」になったら、ロボットは気づくかな？

- もし運良くガンプラの在庫が復活したら、ロボットを動かしてみよう！
- 黒い画面に `🎉 在庫復活検知: すごいガンダム` と表示されたら、大成功！

### テスト４：LINEでお知らせがくるかな？

「在庫あり」を見つけたら、ちゃんとLINEでお知らせしてくれるか、最後のチェック！

- テスト３で `在庫復活検知` が表示されたら、自分のLINEにメッセージが届いているか見てみよう。
- 「【在庫復活】すごいガンダム」みたいなメッセージが届いていたら、全部のテストが成功だ！やったね！

## こまったときは

- **`ファイルがないよ` って言われたら？**
  - `targets.json` や `users.json` の名前が間違っていないか、もう一度確認してみよう。
- **うまく動かない…**
  - `targets.json` の `url` が間違っているかも。ブラウザで開けるか確認してみよう。
  - それでもダメなら、お父さんやお母さんに聞いてみてね。

これでテストは終わりだよ。おつかれさま！